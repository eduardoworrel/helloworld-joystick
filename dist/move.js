"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var nipplejs={exports:{}};window,nipplejs.exports=function(e){var o={};function n(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=o,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(i,t){if(1&t&&(i=n(i)),8&t)return i;if(4&t&&"object"==_typeof(i)&&i&&i.__esModule)return i;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var o in i)n.d(e,o,function(t){return i[t]}.bind(null,o));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=0)}([function(t,i,e){e.r(i);function g(t,i){var e=i.x-t.x,i=i.y-t.y;return Math.sqrt(e*e+i*i)}function b(t){return t*(Math.PI/180)}function n(t){u.has(t)&&clearTimeout(u.get(t)),u.set(t,setTimeout(t,100))}function s(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)}function o(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)}function r(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t}function d(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}function x(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function c(t,i,e){var o,n=a(t);for(o in n)if(n.hasOwnProperty(o))if("string"==typeof i)n[o]=i+" "+e;else{for(var s="",r=0,d=i.length;r<d;r+=1)s+=i[r]+" "+e+", ";n[o]=s.slice(0,-2)}return n}function a(i){var e={};return e[i]="",["webkit","Moz","o"].forEach(function(t){e[t+i.charAt(0).toUpperCase()+i.slice(1)]=""}),e}function l(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}function p(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)}var h,u=new Map,e=!!("ontouchstart"in window),f=!!window.PointerEvent,y=!!window.MSPointerEvent,m={start:"mousedown",move:"mousemove",end:"mouseup"},v={};function w(){}f?h={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:y?h={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:e?(h={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},v=m):h=m,w.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},w.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&0<=this._handlers_[t].indexOf(i)&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},w.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},w.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e,o={};for(e in t)t.hasOwnProperty(e)&&i.hasOwnProperty(e)?o[e]=i[e]:t.hasOwnProperty(e)&&(o[e]=t[e]);return o}(this.options,t))},w.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){"function"==typeof e["on"+i]?e["on"+i].apply(e,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},s(t,h[i],e._domHandlers_[i]),v[i]&&s(t,v[i],e._domHandlers_[i]),e},w.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},o(t,h[i],this._domHandlers_[i]),v[i]&&o(t,v[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};f=w;function O(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(i),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=O.id,O.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}O.prototype=new f,(O.constructor=O).id=0,O.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},O.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",i=function(){var t,i=a("borderRadius");for(t in i)i.hasOwnProperty(t)&&(i[t]="50%");return i}(),t=c("transition","opacity",t),e={};return e.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},e.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},e.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},l(e.el,t),"circle"===this.options.shape&&l(e.back,i),l(e.front,i),this.applyStyles(e),this},O.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},O.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},O.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},O.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},O.prototype.show=function(t){var i=this;return i.options.dataOnly||(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),"function"==typeof t&&t.call(this)},i.options.fadeTime)),i},O.prototype.hide=function(i){var t,e,o=this;return o.options.dataOnly||(o.ui.el.style.opacity=o.options.restOpacity,clearTimeout(o.removeTimeout),clearTimeout(o.showTimeout),clearTimeout(o.restTimeout),o.removeTimeout=setTimeout(function(){var t="dynamic"===o.options.mode?"none":"block";o.ui.el.style.display=t,"function"==typeof i&&i.call(o),o.trigger("hidden",o.instance)},o.options.fadeTime),o.options.restJoystick&&(t=o.options.restJoystick,(e={}).x=!0===t||!1!==t.x?0:o.instance.frontPosition.x,e.y=!0===t||!1!==t.y?0:o.instance.frontPosition.y,o.setPosition(i,e))),o},O.prototype.setPosition=function(t,i){var e=this,i=(e.frontPosition={x:i.x,y:i.y},e.options.fadeTime+"ms"),o={},i=(o.front=c("transition",["top","left"],i),{front:{}});i.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(o),e.applyStyles(i),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},O.prototype.restCallback=function(){var t={};t.front=c("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},O.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},O.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(s<n&&n<3*s&&!t.lockX?i="up":-s<n&&n<=s&&!t.lockY?i="left":3*-s<n&&n<=-s&&!t.lockX?i="down":t.lockY||(i="right"),t.lockY||(e=-r<n&&n<r?"left":"right"),t.lockX||(o=0<n?"up":"down"),t.force>this.options.threshold){var d,c={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(c[d]=this.direction[d]);var a={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,c)c[d]===this.direction[d]&&(a[d]=!0);if(a.x&&a.y&&a.angle)return t;a.x&&a.y||this.trigger("plain",t),a.x||this.trigger("plain:"+e,t),a.y||this.trigger("plain:"+o,t),a.angle||this.trigger("dir dir:"+i,t)}else this.resetDirection();return t};var _=O;function k(t,i){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(i),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);t=getComputedStyle(this.options.zone.parentElement);return t&&"flex"===t.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new f,(k.constructor=k).id=0,k.prototype.prepareNipples=function(){var o=this.nipples;o.on=this.on.bind(this),o.off=this.off.bind(this),o.options=this.options,o.destroy=this.destroy.bind(this),o.ids=this.ids,o.id=this.id,o.processOnMove=this.processOnMove.bind(this),o.processOnEnd=this.processOnEnd.bind(this),o.get=function(t){if(void 0===t)return o[0];for(var i=0,e=o.length;i<e;i+=1)if(o[i].identifier===t)return o[i];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;"static"===t.mode&&((t=this.createNipple(t.position,this.manager.getIdentifier())).add(),this.idles.push(t))},k.prototype.createNipple=function(t,i){var e=this.manager.scroll,o={},n=this.options,s=this.parentIsFlex?e.x:e.x+this.box.left,r=this.parentIsFlex?e.y:e.y+this.box.top,s=(t.x&&t.y?o={x:t.x-s,y:t.y-r}:(t.top||t.right||t.bottom||t.left)&&((s=document.createElement("DIV")).style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s),r=s.getBoundingClientRect(),n.zone.removeChild(s),o=t,t={x:r.left+e.x,y:r.top+e.y}),new _(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape}));return n.dataOnly||(x(s.ui.el,o),x(s.ui.front,s.frontPosition)),this.nipples.push(s),this.trigger("added "+s.identifier+":added",s),this.manager.trigger("added "+s.identifier+":added",s),this.bindNipple(s),s},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){function i(t,i){e=t.type+" "+i.id+":"+t.type,o.trigger(e,i)}var e,o=this;t.on("destroyed",o.onDestroyed.bind(o)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},k.prototype.pressureFn=function(i,e,t){var o=this,n=0;clearInterval(o.pressureIntervals[t]),o.pressureIntervals[t]=setInterval(function(){var t=i.force||i.pressure||i.webkitForce||0;t!==n&&(e.trigger("pressure",t),o.trigger("pressure "+e.identifier+":pressure",t),n=t)}.bind(o),100)},k.prototype.onstart=function(e){var o=this,i=o.options,n=e;return e=r(e),o.updateBox(),p(e,function(t){o.actives.length<i.maxNumberOfNipples?o.processOnStart(t):n.type.match(/^touch/)&&(Object.keys(o.manager.ids).forEach(function(i){var t;Object.values(n.touches).findIndex(function(t){return t.identifier===i})<0&&((t=[e[0]]).identifier=i,o.processOnEnd(t))}),o.actives.length<i.maxNumberOfNipples&&o.processOnStart(t))}),o.manager.bindDocument(),!1},k.prototype.processOnStart=function(i){function t(t){t.trigger("start",t),e.trigger("start "+t.id+":start",t),t.show(),0<s&&e.pressureFn(i,t,t.identifier),e.processOnMove(i)}var e=this,o=e.options,n=e.manager.getIdentifier(i),s=i.force||i.pressure||i.webkitForce||0,r={x:i.pageX,y:i.pageY},d=e.getOrCreate(n,r);d.identifier!==n&&e.manager.removeIdentifier(d.identifier),d.identifier=n;if(0<=(n=e.idles.indexOf(d))&&e.idles.splice(n,1),e.actives.push(d),e.ids.push(d.identifier),"semi"!==o.mode)t(d);else{if(!(g(r,d.position)<=o.catchDistance))return d.destroy(),void e.processOnStart(i);t(d)}return d},k.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):"semi"===o.mode?this.createNipple(i,t):(console.warn("Coudln't find the needed nipple."),!1):this.createNipple(i,t)},k.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e),n=this.manager.scroll;if(s=t,isNaN(s.buttons)?0!==s.pressure:0!==s.buttons){if(!o)return console.error("Found zombie joystick with ID "+e),void this.manager.removeIdentifier(e);i.dynamicPage&&(s=o.el.getBoundingClientRect(),o.position={x:n.x+s.left,y:n.y+s.top}),o.identifier=e;var s=o.options.size/2,e={x:t.pageX,y:t.pageY};i.lockX&&(e.y=o.position.y),i.lockY&&(e.x=o.position.x);var r,d,c,a,l,p=g(e,o.position),h=(h=e,u=o.position,f=u.x-h.x,u=u.y-h.y,Math.atan2(u,f)*(180/Math.PI)),u=b(h),f=p/s,y={distance:p,position:e},m=("circle"===o.options.shape?(r=Math.min(p,s),d=o.position,c=r,l={x:0,y:0},a=b(h),l.x=d.x-c*Math.cos(a),l.y=d.y-c*Math.sin(a),d=l):(c=e,a=o.position,l=s,d={x:Math.min(Math.max(c.x,a.x-l),a.x+l),y:Math.min(Math.max(c.y,a.y-l),a.y+l)},r=g(d,o.position)),i.follow?s<p&&(m=e.x-d.x,v=e.y-d.y,o.position.x+=m,o.position.y+=v,o.el.style.top=o.position.y-(this.box.top+n.y)+"px",o.el.style.left=o.position.x-(this.box.left+n.x)+"px",p=g(e,o.position)):(e=d,p=r),e.x-o.position.x),v=e.y-o.position.y,n=(o.frontPosition={x:m,y:v},i.dataOnly||x(o.ui.front,o.frontPosition),{identifier:o.identifier,position:e,force:f,pressure:t.force||t.pressure||t.webkitForce||0,distance:p,angle:{radian:u,degree:h},vector:{x:m/s,y:-v/s},raw:y,instance:o,lockX:i.lockX,lockY:i.lockY});(n=o.computeDirection(n)).angle={radian:b(180-h),degree:180-h},o.trigger("move",n),this.trigger("move "+o.id+":move",n)}else this.processOnEnd(t)},k.prototype.processOnEnd=function(t){var i=this,e=i.options,t=i.manager.getIdentifier(t),o=i.nipples.get(t),t=i.manager.removeIdentifier(o.identifier);o&&(e.dataOnly||o.hide(function(){"dynamic"===e.mode&&(o.trigger("removed",o),i.trigger("removed "+o.id+":removed",o),i.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(i.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),i.trigger("end "+o.id+":end",o),0<=i.ids.indexOf(o.identifier)&&i.ids.splice(i.ids.indexOf(o.identifier),1),0<=i.actives.indexOf(o)&&i.actives.splice(i.actives.indexOf(o),1),/(semi|static)/.test(e.mode)?i.idles.push(o):0<=i.nipples.indexOf(o)&&i.nipples.splice(i.nipples.indexOf(o),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[t.id]=t.identifier))},k.prototype.onDestroyed=function(t,i){0<=this.nipples.indexOf(i)&&this.nipples.splice(this.nipples.indexOf(i),1),0<=this.actives.indexOf(i)&&this.actives.splice(this.actives.indexOf(i),1),0<=this.idles.indexOf(i)&&this.idles.splice(this.idles.indexOf(i),1),0<=this.ids.indexOf(i.identifier)&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var z=k;function E(t){function i(){var i;o.collections.forEach(function(t){t.forEach(function(t){i=t.el.getBoundingClientRect(),t.position={x:o.scroll.x+i.left,y:o.scroll.y+i.top}})})}function e(){o.scroll=d()}var o=this;o.ids={},o.index=0,o.collections=[],o.scroll=d(),o.config(t),o.prepareCollections(),s(window,"resize",function(){n(i)});return s(window,"scroll",function(){n(e)}),o.collections}E.prototype=new f,(E.constructor=E).prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},E.prototype.create=function(t){return this.createCollection(t)},E.prototype.createCollection=function(t){t=new z(this,t);return this.bindCollection(t),this.collections.push(t),t},E.prototype.bindCollection=function(t){function i(t,i){e=t.type+" "+i.id+":"+t.type,o.trigger(e,i)}var e,o=this;t.on("destroyed",o.onDestroyed.bind(o)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},E.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},E.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},E.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},E.prototype.removeIdentifier=function(t){var i,e={};for(i in this.ids)if(this.ids[i]===t){e.id=i,e.identifier=this.ids[i],delete this.ids[i];break}return e},E.prototype.onmove=function(t){return this.onAny("move",t),!1},E.prototype.onend=function(t){return this.onAny("end",t),!1},E.prototype.oncancel=function(t){return this.onAny("end",t),!1},E.prototype.onAny=function(t,i){var e,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return i=r(i),p(i,function(t){e=o.getIdentifier(t),p(o.collections,function(t,i,e){0<=e.ids.indexOf(i)&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},E.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},E.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var T=new E;i.default={create:function(t){return T.create(t)},factory:T}}]).default;const position={vertical:60,horizontal:500},limit={maxX:3e3,maxY:3e3,minX:0,minY:0},speed={unit:"px",distance:10,ms:50};class Move$2{constructor(t,i,e){this.directions=[],this.position=i,this.principal=t,this.zone=e}start(){var t=this.drawJoystick(this.zone);this.attatchEvents(t),this.listenJoystick(this.principal)}drawJoystick(t){return nipplejs.exports.create({zone:t,mode:"dynamic",color:"white"})}attatchEvents(t){t.on("move",(t,i)=>{this.directions=[],80<i.angle.degree&&i.angle.degree<100&&this.directions.push("ArrowUp"),170<i.angle.degree&&i.angle.degree<190&&this.directions.push("ArrowLeft"),260<i.angle.degree&&i.angle.degree<280&&this.directions.push("ArrowDown"),(350<i.angle.degree||i.angle.degree<10)&&this.directions.push("ArrowRight"),10<i.angle.degree&&i.angle.degree<80&&(this.directions.push("ArrowUp"),this.directions.push("ArrowRight")),100<i.angle.degree&&i.angle.degree<170&&(this.directions.push("ArrowUp"),this.directions.push("ArrowLeft")),190<i.angle.degree&&i.angle.degree<260&&(this.directions.push("ArrowDown"),this.directions.push("ArrowLeft")),280<i.angle.degree&&i.angle.degree<350&&(this.directions.push("ArrowDown"),this.directions.push("ArrowRight"))}),t.on("end",()=>{this.directions=[]})}listenJoystick(t){setInterval(()=>{this.directions.includes("ArrowUp")&&(this.position.vertical>limit.minX&&(this.position.vertical-=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowDown")&&(this.position.vertical<limit.maxX&&(this.position.vertical+=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowLeft")&&(this.position.horizontal>limit.minY&&(this.position.horizontal-=speed.distance),t.style.left=this.position.horizontal+speed.unit),this.directions.includes("ArrowRight")&&(this.position.horizontal<limit.maxY&&(this.position.horizontal+=speed.distance),t.style.left=this.position.horizontal+speed.unit),t.scrollIntoView({block:"center",inline:"center",behavior:"auto"})},speed.ms)}}class Move$1{constructor(t,i){this.directions=[],this.position=i,this.principal=t}start(){this.attatchEvents(),this.listenKeyboard(this.principal),this.watchKeyboard()}watchKeyboard(){const t=document.querySelector(".up"),i=document.querySelector(".down"),e=document.querySelector(".left"),o=document.querySelector(".right");setInterval(()=>{this.directions.includes("ArrowUp")?(t.classList.add("active"),t.classList.add("focus")):(t.classList.remove("active"),t.classList.remove("focus")),this.directions.includes("ArrowDown")?(i.classList.add("active"),i.classList.add("focus")):(i.classList.remove("active"),i.classList.remove("focus")),this.directions.includes("ArrowLeft")?(e.classList.add("active"),e.classList.add("focus")):(e.classList.remove("active"),e.classList.remove("focus")),this.directions.includes("ArrowRight")?(o.classList.add("active"),o.classList.add("focus")):(o.classList.remove("active"),o.classList.remove("focus"))},speed.ms)}attatchEvents(){window.addEventListener("keyup",t=>this.disableMove(t.key)),window.addEventListener("keydown",t=>{this.directions.includes(t.key)||this.directions.push(t.key)})}listenKeyboard(t){setInterval(()=>{this.directions.includes("ArrowUp")&&(this.position.vertical>limit.minX&&(this.position.vertical-=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowDown")&&(this.position.vertical<limit.maxX&&(this.position.vertical+=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowLeft")&&(this.position.horizontal>limit.minY&&(this.position.horizontal-=speed.distance),t.style.left=this.position.horizontal+speed.unit),this.directions.includes("ArrowRight")&&(this.position.horizontal<limit.maxY&&(this.position.horizontal+=speed.distance),t.style.left=this.position.horizontal+speed.unit),t.scrollIntoView({block:"center",inline:"center",behavior:"auto"})},speed.ms)}disableMove(i){this.directions=this.directions.filter(t=>t!==i)}}class Move{static attach(t,i){const e=new Move$2(i,position,t),o=new Move$1(i,position);e.start(),o.start()}}const principal=document.getElementById("p"),zone=document.getElementById("joystick");Move.attach(zone,principal);
