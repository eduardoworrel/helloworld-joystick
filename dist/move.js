"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var nipplejs={exports:{}};window,nipplejs.exports=function(i){var o={};function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,i){i.r(e);function v(t,e){var i=e.x-t.x,e=e.y-t.y;return Math.sqrt(i*i+e*e)}function b(t){return t*(Math.PI/180)}function n(t){u.has(t)&&clearTimeout(u.get(t)),u.set(t,setTimeout(t,100))}function s(t,e,i){for(var o,n=e.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,i,!1):t.attachEvent&&t.attachEvent(o,i)}function o(t,e,i){for(var o,n=e.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,i):t.detachEvent&&t.detachEvent(o,i)}function r(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t}function d(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}function x(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function c(t,e,i){var o,n=a(t);for(o in n)if(n.hasOwnProperty(o))if("string"==typeof e)n[o]=e+" "+i;else{for(var s="",r=0,d=e.length;r<d;r+=1)s+=e[r]+" "+i+", ";n[o]=s.slice(0,-2)}return n}function a(e){var i={};return i[e]="",["webkit","Moz","o"].forEach(function(t){i[t+e.charAt(0).toUpperCase()+e.slice(1)]=""}),i}function l(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function p(t,e){if(t.length)for(var i=0,o=t.length;i<o;i+=1)e(t[i]);else e(t)}var h,u=new Map,i=!!("ontouchstart"in window),f=!!window.PointerEvent,y=!!window.MSPointerEvent,m={start:"mousedown",move:"mousemove",end:"mouseup"},g={};function w(){}f?h={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:y?h={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:i?(h={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},g=m):h=m,w.prototype.on=function(t,e){var i,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)i=o[n],this._handlers_[i]=this._handlers_[i]||[],this._handlers_[i].push(e);return this},w.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&0<=this._handlers_[t].indexOf(e)&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},w.prototype.trigger=function(t,e){var i,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)i=n[s],o._handlers_[i]&&o._handlers_[i].length&&o._handlers_[i].forEach(function(t){t.call(o,{type:i,target:o},e)})},w.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,e){var i,o={};for(i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?o[i]=e[i]:t.hasOwnProperty(i)&&(o[i]=t[i]);return o}(this.options,t))},w.prototype.bindEvt=function(t,e){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[e]=function(){"function"==typeof i["on"+e]?i["on"+e].apply(i,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},s(t,h[e],i._domHandlers_[e]),g[e]&&s(t,g[e],i._domHandlers_[e]),i},w.prototype.unbindEvt=function(t,e){return this._domHandlers_=this._domHandlers_||{},o(t,h[e],this._domHandlers_[e]),g[e]&&o(t,g[e],this._domHandlers_[e]),delete this._domHandlers_[e],this};f=w;function O(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=O.id,O.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}O.prototype=new f,(O.constructor=O).id=0,O.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},O.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=function(){var t,e=a("borderRadius");for(t in e)e.hasOwnProperty(t)&&(e[t]="50%");return e}(),t=c("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},l(i.el,t),"circle"===this.options.shape&&l(i.back,e),l(i.front,e),this.applyStyles(i),this},O.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var i in t[e])this.ui[e].style[i]=t[e][i];return this},O.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},O.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},O.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},O.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)},e.options.fadeTime)),e},O.prototype.hide=function(e){var t,i,o=this;return o.options.dataOnly||(o.ui.el.style.opacity=o.options.restOpacity,clearTimeout(o.removeTimeout),clearTimeout(o.showTimeout),clearTimeout(o.restTimeout),o.removeTimeout=setTimeout(function(){var t="dynamic"===o.options.mode?"none":"block";o.ui.el.style.display=t,"function"==typeof e&&e.call(o),o.trigger("hidden",o.instance)},o.options.fadeTime),o.options.restJoystick&&(t=o.options.restJoystick,(i={}).x=!0===t||!1!==t.x?0:o.instance.frontPosition.x,i.y=!0===t||!1!==t.y?0:o.instance.frontPosition.y,o.setPosition(e,i))),o},O.prototype.setPosition=function(t,e){var i=this,e=(i.frontPosition={x:e.x,y:e.y},i.options.fadeTime+"ms"),o={},e=(o.front=c("transition",["top","left"],e),{front:{}});e.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(o),i.applyStyles(e),i.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(i),i.restCallback()},i.options.fadeTime)},O.prototype.restCallback=function(){var t={};t.front=c("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},O.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},O.prototype.computeDirection=function(t){var e,i,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(s<n&&n<3*s&&!t.lockX?e="up":-s<n&&n<=s&&!t.lockY?e="left":3*-s<n&&n<=-s&&!t.lockX?e="down":t.lockY||(e="right"),t.lockY||(i=-r<n&&n<r?"left":"right"),t.lockX||(o=0<n?"up":"down"),t.force>this.options.threshold){var d,c={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(c[d]=this.direction[d]);var a={};for(d in this.direction={x:i,y:o,angle:e},t.direction=this.direction,c)c[d]===this.direction[d]&&(a[d]=!0);if(a.x&&a.y&&a.angle)return t;a.x&&a.y||this.trigger("plain",t),a.x||this.trigger("plain:"+i,t),a.y||this.trigger("plain:"+o,t),a.angle||this.trigger("dir dir:"+e,t)}else this.resetDirection();return t};var _=O;function k(t,e){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);t=getComputedStyle(this.options.zone.parentElement);return t&&"flex"===t.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new f,(k.constructor=k).id=0,k.prototype.prepareNipples=function(){var o=this.nipples;o.on=this.on.bind(this),o.off=this.off.bind(this),o.options=this.options,o.destroy=this.destroy.bind(this),o.ids=this.ids,o.id=this.id,o.processOnMove=this.processOnMove.bind(this),o.processOnEnd=this.processOnEnd.bind(this),o.get=function(t){if(void 0===t)return o[0];for(var e=0,i=o.length;e<i;e+=1)if(o[e].identifier===t)return o[e];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;"static"===t.mode&&((t=this.createNipple(t.position,this.manager.getIdentifier())).add(),this.idles.push(t))},k.prototype.createNipple=function(t,e){var i=this.manager.scroll,o={},n=this.options,s=this.parentIsFlex?i.x:i.x+this.box.left,r=this.parentIsFlex?i.y:i.y+this.box.top,s=(t.x&&t.y?o={x:t.x-s,y:t.y-r}:(t.top||t.right||t.bottom||t.left)&&((s=document.createElement("DIV")).style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s),r=s.getBoundingClientRect(),n.zone.removeChild(s),o=t,t={x:r.left+i.x,y:r.top+i.y}),new _(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:e,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape}));return n.dataOnly||(x(s.ui.el,o),x(s.ui.front,s.frontPosition)),this.nipples.push(s),this.trigger("added "+s.identifier+":added",s),this.manager.trigger("added "+s.identifier+":added",s),this.bindNipple(s),s},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){function e(t,e){i=t.type+" "+e.id+":"+t.type,o.trigger(i,e)}var i,o=this;t.on("destroyed",o.onDestroyed.bind(o)),t.on("shown hidden rested dir plain",e),t.on("dir:up dir:right dir:down dir:left",e),t.on("plain:up plain:right plain:down plain:left",e)},k.prototype.pressureFn=function(e,i,t){var o=this,n=0;clearInterval(o.pressureIntervals[t]),o.pressureIntervals[t]=setInterval(function(){var t=e.force||e.pressure||e.webkitForce||0;t!==n&&(i.trigger("pressure",t),o.trigger("pressure "+i.identifier+":pressure",t),n=t)}.bind(o),100)},k.prototype.onstart=function(i){var o=this,e=o.options,n=i;return i=r(i),o.updateBox(),p(i,function(t){o.actives.length<e.maxNumberOfNipples?o.processOnStart(t):n.type.match(/^touch/)&&(Object.keys(o.manager.ids).forEach(function(e){var t;Object.values(n.touches).findIndex(function(t){return t.identifier===e})<0&&((t=[i[0]]).identifier=e,o.processOnEnd(t))}),o.actives.length<e.maxNumberOfNipples&&o.processOnStart(t))}),o.manager.bindDocument(),!1},k.prototype.processOnStart=function(e){function t(t){t.trigger("start",t),i.trigger("start "+t.id+":start",t),t.show(),0<s&&i.pressureFn(e,t,t.identifier),i.processOnMove(e)}var i=this,o=i.options,n=i.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,r={x:e.pageX,y:e.pageY},d=i.getOrCreate(n,r);d.identifier!==n&&i.manager.removeIdentifier(d.identifier),d.identifier=n;if(0<=(n=i.idles.indexOf(d))&&i.idles.splice(n,1),i.actives.push(d),i.ids.push(d.identifier),"semi"!==o.mode)t(d);else{if(!(v(r,d.position)<=o.catchDistance))return d.destroy(),void i.processOnStart(e);t(d)}return d},k.prototype.getOrCreate=function(t,e){var i,o=this.options;return/(semi|static)/.test(o.mode)?(i=this.idles[0])?(this.idles.splice(0,1),i):"semi"===o.mode?this.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):this.createNipple(e,t)},k.prototype.processOnMove=function(t){var e=this.options,i=this.manager.getIdentifier(t),o=this.nipples.get(i),n=this.manager.scroll;if(s=t,isNaN(s.buttons)?0!==s.pressure:0!==s.buttons){if(!o)return console.error("Found zombie joystick with ID "+i),void this.manager.removeIdentifier(i);e.dynamicPage&&(s=o.el.getBoundingClientRect(),o.position={x:n.x+s.left,y:n.y+s.top}),o.identifier=i;var s=o.options.size/2,i={x:t.pageX,y:t.pageY};e.lockX&&(i.y=o.position.y),e.lockY&&(i.x=o.position.x);var r,d,c,a,l,p=v(i,o.position),h=(h=i,u=o.position,f=u.x-h.x,u=u.y-h.y,Math.atan2(u,f)*(180/Math.PI)),u=b(h),f=p/s,y={distance:p,position:i},m=("circle"===o.options.shape?(r=Math.min(p,s),d=o.position,c=r,l={x:0,y:0},a=b(h),l.x=d.x-c*Math.cos(a),l.y=d.y-c*Math.sin(a),d=l):(c=i,a=o.position,l=s,d={x:Math.min(Math.max(c.x,a.x-l),a.x+l),y:Math.min(Math.max(c.y,a.y-l),a.y+l)},r=v(d,o.position)),e.follow?s<p&&(m=i.x-d.x,g=i.y-d.y,o.position.x+=m,o.position.y+=g,o.el.style.top=o.position.y-(this.box.top+n.y)+"px",o.el.style.left=o.position.x-(this.box.left+n.x)+"px",p=v(i,o.position)):(i=d,p=r),i.x-o.position.x),g=i.y-o.position.y,n=(o.frontPosition={x:m,y:g},e.dataOnly||x(o.ui.front,o.frontPosition),{identifier:o.identifier,position:i,force:f,pressure:t.force||t.pressure||t.webkitForce||0,distance:p,angle:{radian:u,degree:h},vector:{x:m/s,y:-g/s},raw:y,instance:o,lockX:e.lockX,lockY:e.lockY});(n=o.computeDirection(n)).angle={radian:b(180-h),degree:180-h},o.trigger("move",n),this.trigger("move "+o.id+":move",n)}else this.processOnEnd(t)},k.prototype.processOnEnd=function(t){var e=this,i=e.options,t=e.manager.getIdentifier(t),o=e.nipples.get(t),t=e.manager.removeIdentifier(o.identifier);o&&(i.dataOnly||o.hide(function(){"dynamic"===i.mode&&(o.trigger("removed",o),e.trigger("removed "+o.id+":removed",o),e.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(e.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),e.trigger("end "+o.id+":end",o),0<=e.ids.indexOf(o.identifier)&&e.ids.splice(e.ids.indexOf(o.identifier),1),0<=e.actives.indexOf(o)&&e.actives.splice(e.actives.indexOf(o),1),/(semi|static)/.test(i.mode)?e.idles.push(o):0<=e.nipples.indexOf(o)&&e.nipples.splice(e.nipples.indexOf(o),1),e.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(e.manager.ids[t.id]=t.identifier))},k.prototype.onDestroyed=function(t,e){0<=this.nipples.indexOf(e)&&this.nipples.splice(this.nipples.indexOf(e),1),0<=this.actives.indexOf(e)&&this.actives.splice(this.actives.indexOf(e),1),0<=this.idles.indexOf(e)&&this.idles.splice(this.idles.indexOf(e),1),0<=this.ids.indexOf(e.identifier)&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var E=k;function T(t){function e(){var e;o.collections.forEach(function(t){t.forEach(function(t){e=t.el.getBoundingClientRect(),t.position={x:o.scroll.x+e.left,y:o.scroll.y+e.top}})})}function i(){o.scroll=d()}var o=this;o.ids={},o.index=0,o.collections=[],o.scroll=d(),o.config(t),o.prepareCollections(),s(window,"resize",function(){n(e)});return s(window,"scroll",function(){n(i)}),o.collections}T.prototype=new f,(T.constructor=T).prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var i;return t.collections.every(function(t){return!(i=t.get(e))}),i}},T.prototype.create=function(t){return this.createCollection(t)},T.prototype.createCollection=function(t){t=new E(this,t);return this.bindCollection(t),this.collections.push(t),t},T.prototype.bindCollection=function(t){function e(t,e){i=t.type+" "+e.id+":"+t.type,o.trigger(i,e)}var i,o=this;t.on("destroyed",o.onDestroyed.bind(o)),t.on("shown hidden rested dir plain",e),t.on("dir:up dir:right dir:down dir:left",e),t.on("plain:up plain:right plain:down plain:left",e)},T.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},T.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},T.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},T.prototype.removeIdentifier=function(t){var e,i={};for(e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},T.prototype.onmove=function(t){return this.onAny("move",t),!1},T.prototype.onend=function(t){return this.onAny("end",t),!1},T.prototype.oncancel=function(t){return this.onAny("end",t),!1},T.prototype.onAny=function(t,e){var i,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return e=r(e),p(e,function(t){i=o.getIdentifier(t),p(o.collections,function(t,e,i){0<=i.ids.indexOf(e)&&(i[n](t),t._found_=!0)}.bind(null,t,i)),t._found_||o.removeIdentifier(i)}),!1},T.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},T.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var P=new T;e.default={create:function(t){return P.create(t)},factory:P}}]).default;class Move$2{constructor(t){this.control=t}start(){var t=this.drawJoystick();this.attatchEvents(t)}drawJoystick(){const t=document.querySelector("#area");if(!t)throw new Error("O elemeno 'area' é obrigatório");const e=document.createElement("div");return e.style.position="fixed",e.style.width="100vw",e.style.height="100vh",t.prepend(e),nipplejs.exports.create({zone:e,mode:"dynamic",color:"white"})}attatchEvents(t){t.on("move",(t,e)=>{80<e.angle.degree&&e.angle.degree<100&&(this.control.directions=["ArrowUp"]),170<e.angle.degree&&e.angle.degree<190&&(this.control.directions=["ArrowLeft"]),260<e.angle.degree&&e.angle.degree<280&&(this.control.directions=["ArrowDown"]),(350<e.angle.degree||e.angle.degree<10)&&(this.control.directions=["ArrowRight"]),10<e.angle.degree&&e.angle.degree<80&&(this.control.directions=["ArrowUp","ArrowRight"]),100<e.angle.degree&&e.angle.degree<170&&(this.control.directions=["ArrowUp","ArrowLeft"]),190<e.angle.degree&&e.angle.degree<260&&(this.control.directions=["ArrowDown","ArrowLeft"]),280<e.angle.degree&&e.angle.degree<350&&(this.control.directions=["ArrowDown","ArrowRight"])}),t.on("end",()=>{this.control.directions=[]})}}class Move$1{constructor(t){this.control=t}start(){this.attatchEvents(),this.drawKeyboard()}drawKeyboard(){const t=document.createElement("div");t.style.position="fixed",t.style.pointerEvents="none",t.style.bottom="3%",t.style.left="3%",t.innerHTML=`
      <button class="kbc-button up" 
        style='
          display: block;
          text-align: center;
          margin: 0 auto !important;
          '>	
            &#8593;
          </button>
      <button class="kbc-button left">  &#8592;</button>
      <button class="kbc-button down">  &#8595;</button>
      <button class="kbc-button right">	&#8594;</button>
    `,document.body.append(t)}attatchEvents(){window.addEventListener("keyup",t=>this.disableMove(t.key)),window.addEventListener("keydown",t=>{this.control.directions.includes(t.key)||this.control.directions.push(t.key)})}disableMove(e){this.control.directions=this.control.directions.filter(t=>t!==e)}}const position={vertical:60,horizontal:500},limit={maxX:3e3,maxY:3e3,minX:0,minY:0},speed={unit:"px",distance:10,ms:50};class WatchMove{constructor(t,e){this.directions=[],this.position=t,this.move(e)}move(t){setInterval(()=>{this.directions.includes("ArrowUp")&&(this.position.vertical>limit.minX&&(this.position.vertical-=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowDown")&&(this.position.vertical<limit.maxX&&(this.position.vertical+=speed.distance),t.style.top=this.position.vertical+speed.unit),this.directions.includes("ArrowLeft")&&(this.position.horizontal>limit.minY&&(this.position.horizontal-=speed.distance),t.style.left=this.position.horizontal+speed.unit),this.directions.includes("ArrowRight")&&(this.position.horizontal<limit.maxY&&(this.position.horizontal+=speed.distance),t.style.left=this.position.horizontal+speed.unit),t.scrollIntoView({block:"center",inline:"center",behavior:"auto"})},speed.ms)}togglePressedKeyboard(){this.up=document.querySelector(".up"),this.down=document.querySelector(".down"),this.left=document.querySelector(".left"),this.right=document.querySelector(".right"),setInterval(()=>{this.directions.includes("ArrowUp")?(this.up.classList.add("active"),this.up.classList.add("focus")):(this.up.classList.remove("active"),this.up.classList.remove("focus")),this.directions.includes("ArrowDown")?(this.down.classList.add("active"),this.down.classList.add("focus")):(this.down.classList.remove("active"),this.down.classList.remove("focus")),this.directions.includes("ArrowLeft")?(this.left.classList.add("active"),this.left.classList.add("focus")):(this.left.classList.remove("active"),this.left.classList.remove("focus")),this.directions.includes("ArrowRight")?(this.right.classList.add("active"),this.right.classList.add("focus")):(this.right.classList.remove("active"),this.right.classList.remove("focus"))},100)}}class Move{static attach(t){const e=new WatchMove(position,t),i=new Move$2(e),o=new Move$1(e);i.start(),o.start(),e.togglePressedKeyboard()}}const real=document.querySelector("#realcontent");if(!real)throw new Error('O elemento "realcontent" é obrigatório');const principal=document.createElement("div");principal.setAttribute("style",`
            position:absolute;
            width: 150px; 
            height: 150px;
            background-image: url('https://i.pinimg.com/originals/a0/26/1b/a0261b885cfba5a65c675c33327acf5a.png');
            background-size: 100%;
            top: 60px;
            left: 500px;        
`),real.append(principal),Move.attach(principal);
